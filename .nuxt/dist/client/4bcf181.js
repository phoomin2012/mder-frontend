(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{371:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(368),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t),c=Object(n.a)(e);return r.getTime()-c.getTime()}},373:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(368),o=r(367);function c(t){Object(o.a)(1,arguments);var e=Object(n.a)(t);return e.setHours(0,0,0,0),e}},376:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(368),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t),c=Object(n.a)(e),l=r.getTime()-c.getTime();return l<0?-1:l>0?1:l}},388:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(369),o=r(368),c=r(367);function l(t,e){Object(c.a)(2,arguments);var r=Object(o.a)(t),l=Object(n.a)(e);if(isNaN(l))return new Date(NaN);if(!l)return r;var f=r.getDate(),h=new Date(r.getTime());h.setMonth(r.getMonth()+l+1,0);var d=h.getDate();return f>=d?h:(r.setFullYear(h.getFullYear(),h.getMonth(),f),r)}},389:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r(375),o=r(373),c=r(367),l=864e5;function f(t,e){Object(c.a)(2,arguments);var r=Object(o.a)(t),f=Object(o.a)(e),h=r.getTime()-Object(n.a)(r),d=f.getTime()-Object(n.a)(f);return Math.round((h-d)/l)}},390:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(371),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t,e)/1e3;return r>0?Math.floor(r):Math.ceil(r)}},405:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(369),o=r(368),c=r(367);function l(t,e){Object(c.a)(2,arguments);var r=Object(o.a)(t),l=Object(n.a)(e);return isNaN(l)?new Date(NaN):l?(r.setDate(r.getDate()+l),r):r}},406:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(368),o=r(367);function c(t){Object(o.a)(1,arguments);var e=Object(n.a)(t);return e.setHours(23,59,59,999),e}},407:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(368),o=r(367);function c(t){Object(o.a)(1,arguments);var e=Object(n.a)(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}},408:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r(368),o=r(389),c=r(367);function l(t,e){var r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function f(t,e){Object(c.a)(2,arguments);var r=Object(n.a)(t),f=Object(n.a)(e),h=l(r,f),d=Math.abs(Object(o.a)(r,f));r.setDate(r.getDate()-h*d);var v=Number(l(r,f)===-h),O=h*(d-v);return 0===O?0:O}},409:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(371),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t,e)/6e4;return r>0?Math.floor(r):Math.ceil(r)}},420:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var n=r(368),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t),c=Object(n.a)(e),l=r.getFullYear()-c.getFullYear(),f=r.getMonth()-c.getMonth();return 12*l+f}var l=r(376),f=r(406),h=r(407);function d(t){Object(o.a)(1,arguments);var e=Object(n.a)(t);return Object(f.a)(e).getTime()===Object(h.a)(e).getTime()}function v(t,e){Object(o.a)(2,arguments);var r,f=Object(n.a)(t),h=Object(n.a)(e),v=Object(l.a)(f,h),O=Math.abs(c(f,h));if(O<1)r=0;else{1===f.getMonth()&&f.getDate()>27&&f.setDate(30),f.setMonth(f.getMonth()-v*O);var j=Object(l.a)(f,h)===-v;d(Object(n.a)(t))&&1===O&&1===Object(l.a)(t,h)&&(j=!1),r=v*(O-Number(j))}return 0===r?0:r}},465:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(371),o=r(367),c=36e5;function l(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t,e)/c;return r>0?Math.floor(r):Math.ceil(r)}},472:function(t,e,r){"use strict";r.r(e);r(4),r(3),r(5),r(2),r(6),r(13),r(17),r(53),r(32),r(52),r(57),r(38);var n=r(14),o=r(0),c=(r(56),r(37),r(80),r(18),r(11),r(21),r(1),r(91)),l=r(416),f=(r(419),r(391)),h=r(465),d=r(464);function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={name:"Statistics24Hour",data:function(){return{timer:null,now:new Date,loading:{population:!1},history:{},chart:null}},computed:m(m({},Object(c.b)({patients:"patient/all"})),{},{patientsStay4hr:function(){var t,data=[{name:"Less than 4 hr",value:0},{name:"More than 4 hr",value:0}],e=v(this.patients);try{for(e.s();!(t=e.n()).done;){var r=t.value;Object(h.a)(this.now,Object(d.a)(r.entry))<4?data[0].value+=1:data[1].value+=1}}catch(t){e.e(t)}finally{e.f()}return data[0].value=data[0].value/this.patients.length*100,data[1].value=data[1].value/this.patients.length*100,data},patientsStay6hr:function(){var t,data=[{name:"Less than 6 hr",value:0},{name:"More than 6 hr",value:0}],e=v(this.patients);try{for(e.s();!(t=e.n()).done;){var r=t.value;Object(h.a)(this.now,Object(d.a)(r.entry))<6?data[0].value+=1:data[1].value+=1}}catch(t){e.e(t)}finally{e.f()}return data[0].value=data[0].value/this.patients.length*100,data[1].value=data[1].value/this.patients.length*100,data},hours:function(){return this.now.getHours()}}),watch:{patients:{deep:!0,handler:function(){this.createLOSChart4hr(),this.createLOSChart6hr()}},hours:function(){var t=this;this.fetchHistory().then((function(){t.createBarChart()}))}},mounted:function(){var t=this;this.fetchHistory().then((function(){t.createBarChart()})),this.createLOSChart4hr(),this.createLOSChart6hr(),this.timer=setInterval(this.updateNow,1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{updateNow:function(){this.now=new Date},fetchHistory:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/history/dashboard");case 2:r=e.sent,data=r.data,t.$set(t.history,"population",data.population);case 5:case"end":return e.stop()}}),e)})))()},createBarChart:function(){var t,data={labels:[],datasets:[{label:this.$t("staff.roles.patient"),backgroundColor:"#1786b9",borderColor:"#1786b9",data:[],pointRadius:0,borderWidth:1},{label:this.$t("staff.roles.staff"),backgroundColor:"#ff66c4",borderColor:"#ff66c4",data:[],pointRadius:0,borderWidth:1}]},e=v(this.history.population);try{for(e.s();!(t=e.n()).done;){var r=t.value;data.labels.push(new Date(r.time)),data.datasets[0].data.push(r.patient),data.datasets[1].data.push(r.nurse+r.physician)}}catch(t){e.e(t)}finally{e.f()}if(this.chart)this.chart.options.locale=this.$i18n.locale,this.chart.options.scales.x.title.text=this.$t("history.time"),this.chart.options.scales.y.title.text=this.$t("history.amount.people"),this.chart.data=data,this.chart.update();else{var n=document.getElementById("population-24hr-statistics");this.chart=new l.a(n,{type:"bar",data:data,options:{animation:!1,locale:this.$i18n.locale,interaction:{intersect:!1,mode:"index"},scales:{x:{grid:{display:!1},type:"time",time:{tooltipFormat:"yyyy-MM-dd HH:mm",displayFormats:{second:"MM-dd HH:mm",minute:"MM-dd HH:mm",hour:"MM-dd HH:mm"}},title:{display:!0,text:""}},y:{grid:{display:!1},title:{display:!0,text:""},suggestedMax:10}}}})}},createPieChart:function(t,data){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["#d4665c","#f0975b"];t.firstChild;)t.removeChild(t.firstChild);var r=300,n=300,o=Math.min(r,n)/2*.5,c=f.a().innerRadius(0).outerRadius(Math.min(r,n)/2-10),l=f.a().innerRadius(o).outerRadius(o),h=f.e().sort(null).value((function(t){return t.value})),d=h(data),svg=f.b("svg").attr("viewBox",[-r/2,-n/2,r,n]);svg.append("g").attr("stroke","white").selectAll("path").data(d).join("path").attr("fill",(function(t){return e[t.index]})).attr("d",c).append("title").text((function(t){return"".concat(t.data.name,": ").concat(t.data.value.toLocaleString())})),svg.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(d).join("text").attr("transform",(function(t){return"translate(".concat(l.centroid(t),")")})).call((function(text){return text.filter((function(t){return t.endAngle-t.startAngle>.25})).append("tspan").attr("y","-0.4em").attr("font-weight","bold").text((function(t){return t.data.name}))})).call((function(text){return text.filter((function(t){return t.endAngle-t.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text((function(t){return t.data.value.toLocaleString()+"%"}))})),t.appendChild(svg.node())},createLOSChart4hr:function(){var data=this.patientsStay4hr,t=document.getElementById("los-pie4hr");this.createPieChart(t,data,["#f0975b","#d4665c"])},createLOSChart6hr:function(){var data=this.patientsStay6hr,t=document.getElementById("los-pie6hr");this.createPieChart(t,data,["#bf71e0","#8b5dbf"])}}},w=r(51),component=Object(w.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",{staticClass:"mb-3"},[r("b-col",[r("b-overlay",{staticClass:"h-100",attrs:{show:t.loading.population}},[r("b-card",{staticClass:"h-100",attrs:{"body-class":"d-flex flex-column"}},[r("div",[t._v("24hr patients & staff statistics")]),t._v(" "),r("div",{staticClass:"flex-grow-1"},[r("canvas",{staticStyle:{"box-sizing":"border-box"},attrs:{id:"population-24hr-statistics"}})])])],1)],1),t._v(" "),r("b-col",[r("b-card",{staticClass:"h-100"},[r("div",[t._v("Percent of length of stay in ER (Hour)")]),t._v(" "),r("b-row",[r("b-col",[r("div",{attrs:{id:"los-pie4hr"}})]),t._v(" "),r("b-col",[r("div",{attrs:{id:"los-pie6hr"}})])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},474:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r(368),o=r(367);function c(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t),c=Object(n.a)(e);return r.getFullYear()-c.getFullYear()}var l=r(376);function f(t,e){Object(o.a)(2,arguments);var r=Object(n.a)(t),f=Object(n.a)(e),h=Object(l.a)(r,f),d=Math.abs(c(r,f));r.setFullYear(1584),f.setFullYear(1584);var v=Object(l.a)(r,f)===-h,O=h*(d-Number(v));return 0===O?0:O}}}]);