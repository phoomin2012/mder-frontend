(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{367:function(t,e,n){"use strict";function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}n.d(e,"a",(function(){return r}))},368:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(367);function o(t){Object(r.a)(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},371:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(368),o=n(367);function c(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t),c=Object(r.a)(e);return n.getTime()-c.getTime()}},390:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(371),o=n(367);function c(t,e){Object(o.a)(2,arguments);var n=Object(r.a)(t,e)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},412:function(t,e,n){var r=n(9),o=n(413),c=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return o(t)&&c(t)<=9007199254740991}})},413:function(t,e,n){var r=n(26),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},414:function(t,e,n){var r=n(9),o=n(415);r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},415:function(t,e,n){var r=n(22),o=n(181).trim,c=n(182),d=r.parseInt,l=/^[+-]?0[Xx]/,f=8!==d(c+"08")||22!==d(c+"0x16");t.exports=f?function(t,e){var n=o(String(t));return d(n,e>>>0||(l.test(n)?16:10))}:d},470:function(t,e,n){"use strict";n.r(e);var r=n(14),o=(n(56),n(412),n(253),n(414),n(37),n(390)),c=n(131),d={props:{patientId:{type:String,default:null}},data:function(){return{duration:0,followTask:!0,now:new Date,timer:null}},computed:{patient:function(){return this.$store.getters["patient/getById"](this.patientId)},counting:function(){try{return this.$store.getters["countdown/getByPatient"](this.patientId)}catch(t){return null}},readableHours:{get:function(){var t=(this.duration-this.duration%3600)/3600;return t<10?"0".concat(t):t},set:function(t){this.followTask&&(this.followTask=!1);var e=parseInt(t);Number.isSafeInteger(e)&&(this.duration=this.duration%3600+3600*e)}},readableMinutes:{get:function(){var t=(this.duration%3600-this.duration%60)/60;return t<10?"0".concat(t):t},set:function(t){this.followTask&&(this.followTask=!1);var e=this.duration-this.duration%3600,s=this.duration%60,n=parseInt(t);Number.isSafeInteger(n)&&(this.duration=e+s+60*n)}},readableSeconds:{get:function(){var t=this.duration%60;return t<10?"0".concat(t):t},set:function(t){this.followTask&&(this.followTask=!1);var e=Number.parseInt(t);Number.isSafeInteger(e)&&(this.duration=this.duration-this.duration%60+e)}}},mounted:function(){this.timer=setInterval(this.updateDuration,1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{updateDuration:function(){if(this.followTask&&null!==this.counting){this.$set(this,"now",new Date);var s=Object(o.a)(this.counting.end,this.now);this.duration=s<0?0:s}},increaseDuration:function(){this.readableSeconds+=300},decreaseDuration:function(){this.readableSeconds-=300},startCountdown:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/api/countdown/start",{patient:t.patientId,duration:t.duration});case 3:n=e.sent,(data=n.data).success?(c.c.fire(t.$t("popup.countdownStart")),t.$emit("close")):c.b.fire(t.$t("error.popup."+data.error.popup)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.b.fire(t.$t("error.popup.request"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},stopCountdown:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/api/countdown/stop",{id:t.counting._id});case 3:n=e.sent,(data=n.data).success?(c.c.fire(t.$t("popup.countdownStop")),t.$emit("close")):c.b.fire(t.$t("error.popup."+data.error.popup)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.b.fire(t.$t("error.popup.request"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}},l=n(51),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex align-items-center justify-content-between"},[n("b-button",{on:{click:t.increaseDuration}},[n("fa-icon",{attrs:{icon:"caret-up"}})],1),t._v(" "),n("div",{staticClass:"flex-grow-1 px-2"},[n("div",{staticClass:"d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.readableHours,expression:"readableHours"},{name:"mask",rawName:"v-mask",value:"#?#",expression:"'#?#'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.readableHours},on:{input:function(e){e.target.composing||(t.readableHours=e.target.value)}}}),t._v(" "),n("div",{staticClass:"px-2"},[t._v("\n          :\n        ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.readableMinutes,expression:"readableMinutes"},{name:"mask",rawName:"v-mask",value:"#?#",expression:"'#?#'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.readableMinutes},on:{input:function(e){e.target.composing||(t.readableMinutes=e.target.value)}}}),t._v(" "),n("div",{staticClass:"px-2"},[t._v("\n          :\n        ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.readableSeconds,expression:"readableSeconds"},{name:"mask",rawName:"v-mask",value:"#?#",expression:"'#?#'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.readableSeconds},on:{input:function(e){e.target.composing||(t.readableSeconds=e.target.value)}}})])]),t._v(" "),n("b-button",{attrs:{disabled:t.duration<=0},on:{click:t.decreaseDuration}},[n("fa-icon",{attrs:{icon:"caret-down"}})],1)],1),t._v(" "),n("div",{staticClass:"text-center mt-2"},[n("b-button",{attrs:{variant:"danger",disabled:null===t.counting},on:{click:t.stopCountdown}},[t._v("\n      Reset\n    ")]),t._v(" "),n("b-button",{attrs:{variant:"success",disabled:0===t.duration},on:{click:t.startCountdown}},[t._v("\n      Start\n    ")])],1)])}),[],!1,null,null,null);e.default=component.exports}}]);